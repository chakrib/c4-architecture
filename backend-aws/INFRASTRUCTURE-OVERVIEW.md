# Infrastructure Overview

## Deployment Options

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   C4 Diagram Generator                       â”‚
â”‚                   AWS Serverless Backend                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚     SAM     â”‚         â”‚  Terraform â”‚
         â”‚ CloudForm.  â”‚         â”‚    HCL     â”‚
         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                â”‚                      â”‚
                â”‚                      â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
         â”‚      Identical AWS Resources       â”‚
         â”‚  â€¢ API Gateway (4 endpoints)       â”‚
         â”‚  â€¢ Lambda Functions (4)            â”‚
         â”‚  â€¢ Lambda Layer                    â”‚
         â”‚  â€¢ DynamoDB (optional)             â”‚
         â”‚  â€¢ IAM Roles & Policies            â”‚
         â”‚  â€¢ CloudWatch Logs                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend  â”‚
â”‚   (React)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ HTTPS
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              API Gateway (REST API)                  â”‚
â”‚  â€¢ /api/diagrams/validate                           â”‚
â”‚  â€¢ /api/diagrams/suggest-improvements               â”‚
â”‚  â€¢ /api/diagrams/generate                           â”‚
â”‚  â€¢ /api/diagrams/refine                             â”‚
â”‚  â€¢ CORS enabled                                     â”‚
â”‚  â€¢ X-Ray tracing                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Invokes
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Lambda Functions                        â”‚
â”‚                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚ Validate â”‚  â”‚ Suggest  â”‚  â”‚ Generate â”‚         â”‚
â”‚  â”‚ Function â”‚  â”‚ Function â”‚  â”‚ Function â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚
â”‚       â”‚             â”‚              â”‚                â”‚
â”‚  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚         Refine Function                â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                   â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚         Common Lambda Layer            â”‚         â”‚
â”‚  â”‚  â€¢ bedrock_client.py                   â”‚         â”‚
â”‚  â”‚  â€¢ validation.py                       â”‚         â”‚
â”‚  â”‚  â€¢ boto3, pydantic                     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚
       â”‚ Calls                 â”‚ Writes (optional)
       â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS Bedrock    â”‚    â”‚    DynamoDB      â”‚
â”‚  Claude 3 Haiku â”‚    â”‚ Diagram History  â”‚
â”‚  â€¢ Generate     â”‚    â”‚ â€¢ session_id     â”‚
â”‚  â€¢ Suggest      â”‚    â”‚ â€¢ version        â”‚
â”‚  â€¢ Refine       â”‚    â”‚ â€¢ diagram_data   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Logs
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CloudWatch Logs                         â”‚
â”‚  â€¢ /aws/lambda/validate                             â”‚
â”‚  â€¢ /aws/lambda/suggest                              â”‚
â”‚  â€¢ /aws/lambda/generate                             â”‚
â”‚  â€¢ /aws/lambda/refine                               â”‚
â”‚  â€¢ /aws/apigateway/c4-diagram-generator             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## File Structure Comparison

### SAM Structure

```
backend-aws/
â”œâ”€â”€ template.yaml              # All infrastructure (1 file)
â”œâ”€â”€ samconfig.toml             # SAM configuration
â”œâ”€â”€ requirements.txt           # Dependencies
â”‚
â”œâ”€â”€ functions/                 # Lambda code
â”‚   â”œâ”€â”€ validate/
â”‚   â”œâ”€â”€ suggest/
â”‚   â”œâ”€â”€ generate/
â”‚   â””â”€â”€ refine/
â”‚
â””â”€â”€ layers/                    # Shared code
    â””â”€â”€ common/
```

**Infrastructure**: 1 YAML file

### Terraform Structure

```
backend-aws/terraform/
â”œâ”€â”€ main.tf                    # Provider config
â”œâ”€â”€ variables.tf               # Input variables
â”œâ”€â”€ outputs.tf                 # Output values
â”œâ”€â”€ lambda.tf                  # Lambda resources
â”œâ”€â”€ api_gateway.tf            # API Gateway
â”œâ”€â”€ dynamodb.tf               # DynamoDB
â”œâ”€â”€ dev.tfvars                # Dev environment
â”œâ”€â”€ prod.tfvars               # Prod environment
â”‚
â”œâ”€â”€ modules/                   # Reusable modules
â”‚   â””â”€â”€ cors/
â”‚       â””â”€â”€ main.tf
â”‚
â””â”€â”€ scripts/                   # Deployment scripts
    â”œâ”€â”€ build-layer.sh
    â””â”€â”€ deploy.sh
```

**Infrastructure**: 6 HCL files + modules

## Deployment Flow

### SAM Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  sam build  â”‚  Build Lambda functions and layer
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ sam deploy  â”‚  Package and deploy to CloudFormation
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CloudFormation Stack Created           â”‚
â”‚  â€¢ API Gateway                           â”‚
â”‚  â€¢ Lambda Functions                      â”‚
â”‚  â€¢ IAM Roles                             â”‚
â”‚  â€¢ DynamoDB (optional)                   â”‚
â”‚  â€¢ CloudWatch Logs                       â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ API Endpointâ”‚  Ready to use
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Time**: 5 minutes

### Terraform Deployment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ build-layer.sh   â”‚  Build Lambda layer
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ terraform init   â”‚  Initialize providers
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ terraform plan   â”‚  Preview changes
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ terraform apply  â”‚  Create resources
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AWS Resources Created                     â”‚
â”‚  â€¢ API Gateway                             â”‚
â”‚  â€¢ Lambda Functions                        â”‚
â”‚  â€¢ IAM Roles                               â”‚
â”‚  â€¢ DynamoDB (optional)                     â”‚
â”‚  â€¢ CloudWatch Logs                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Endpoint    â”‚  Ready to use
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Time**: 10 minutes

## Cost Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Monthly Cost Estimate                   â”‚
â”‚                                                      â”‚
â”‚  Low Traffic (10K requests/month)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ API Gateway        â”‚   $0.35  â”‚                 â”‚
â”‚  â”‚ Lambda             â”‚   $2.00  â”‚                 â”‚
â”‚  â”‚ Bedrock (Claude)   â”‚   $2.50  â”‚                 â”‚
â”‚  â”‚ DynamoDB           â”‚   $1.25  â”‚                 â”‚
â”‚  â”‚ CloudWatch         â”‚   $0.50  â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ Total              â”‚   $6.60  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                      â”‚
â”‚  Medium Traffic (100K requests/month)               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ API Gateway        â”‚   $3.50  â”‚                 â”‚
â”‚  â”‚ Lambda             â”‚  $20.00  â”‚                 â”‚
â”‚  â”‚ Bedrock (Claude)   â”‚  $25.00  â”‚                 â”‚
â”‚  â”‚ DynamoDB           â”‚  $12.50  â”‚                 â”‚
â”‚  â”‚ CloudWatch         â”‚   $2.00  â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ Total              â”‚  $63.00  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                      â”‚
â”‚  High Traffic (1M requests/month)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ API Gateway        â”‚  $35.00  â”‚                 â”‚
â”‚  â”‚ Lambda             â”‚ $200.00  â”‚                 â”‚
â”‚  â”‚ Bedrock (Claude)   â”‚ $250.00  â”‚                 â”‚
â”‚  â”‚ DynamoDB           â”‚ $125.00  â”‚                 â”‚
â”‚  â”‚ CloudWatch         â”‚  $20.00  â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ Total              â”‚ $630.00  â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Note: Costs are identical for SAM and Terraform deployments
```

## Feature Comparison Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Feature         â”‚     SAM     â”‚  Terraform   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Setup Time           â”‚  5 minutes  â”‚  10 minutes  â”‚
â”‚ Local Testing        â”‚     âœ…      â”‚      âŒ      â”‚
â”‚ Preview Changes      â”‚     âŒ      â”‚      âœ…      â”‚
â”‚ Multi-Cloud          â”‚     âŒ      â”‚      âœ…      â”‚
â”‚ State Management     â”‚   Basic     â”‚   Advanced   â”‚
â”‚ Modularity           â”‚   Limited   â”‚   Excellent  â”‚
â”‚ Community            â”‚    Good     â”‚   Excellent  â”‚
â”‚ Production Features  â”‚    Good     â”‚   Excellent  â”‚
â”‚ Learning Curve       â”‚    Easy     â”‚   Moderate   â”‚
â”‚ Cost                 â”‚    Free     â”‚     Free     â”‚
â”‚ AWS Resources        â”‚  Identical  â”‚   Identical  â”‚
â”‚ Monthly Cost         â”‚  $5-50      â”‚    $5-50     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Decision Tree

```
                    Start Here
                        â”‚
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Do you need multi-cloud       â”‚
        â”‚  or cloud-agnostic IaC?        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                â”‚
            Yes â”‚                â”‚ No
                â”‚                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
        â”‚   Terraform    â”‚      â”‚
        â”‚  (Recommended) â”‚      â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
                                â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Do you need local Lambda  â”‚
                    â”‚  testing capabilities?     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚            â”‚
                        Yes â”‚            â”‚ No
                            â”‚            â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚      SAM       â”‚  â”‚
                    â”‚   (AWS-only)   â”‚  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                        â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                            â”‚  Is this for production    â”‚
                            â”‚  or enterprise use?        â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚            â”‚
                                Yes â”‚            â”‚ No
                                    â”‚            â”‚
                            â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                            â”‚   Terraform    â”‚  â”‚
                            â”‚  (Industry     â”‚  â”‚
                            â”‚   Standard)    â”‚  â”‚
                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                                â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  Either works!     â”‚
                                    â”‚  Choose based on   â”‚
                                    â”‚  team preference   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Quick Command Reference

### SAM Commands

```bash
# Build
sam build

# Deploy (first time)
sam deploy --guided

# Deploy (subsequent)
sam deploy

# View logs
sam logs --tail

# Test locally
sam local start-api

# Delete
sam delete

# Validate template
sam validate
```

### Terraform Commands

```bash
# Build layer
./scripts/build-layer.sh

# Initialize
terraform init

# Plan
terraform plan -var-file=dev.tfvars

# Apply
terraform apply -var-file=dev.tfvars

# View outputs
terraform output

# Destroy
terraform destroy -var-file=dev.tfvars

# Validate
terraform validate

# Format
terraform fmt
```

### Automated Deployment

```bash
# SAM (manual)
cd backend-aws
sam build && sam deploy

# Terraform (automated script)
cd backend-aws/terraform
./scripts/deploy.sh -e dev
./scripts/deploy.sh -e prod -y  # Auto-approve
```

## Environment Configuration

### Development Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Development (dev.tfvars)       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Lambda Memory:      512 MB          â”‚
â”‚ Lambda Timeout:     30 seconds      â”‚
â”‚ Log Retention:      7 days          â”‚
â”‚ CORS:               * (all origins) â”‚
â”‚ DynamoDB:           Enabled         â”‚
â”‚ Cost:               $5-10/month     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Production Environment

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Production (prod.tfvars)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Lambda Memory:      1024 MB         â”‚
â”‚ Lambda Timeout:     60 seconds      â”‚
â”‚ Log Retention:      30 days         â”‚
â”‚ CORS:               Specific domain â”‚
â”‚ DynamoDB:           Enabled         â”‚
â”‚ Cost:               $20-50/month    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Documentation Map

```
backend-aws/
â”‚
â”œâ”€â”€ Quick Start
â”‚   â”œâ”€â”€ QUICK-DEPLOY.md          âš¡ Start here
â”‚   â””â”€â”€ GETTING-STARTED.md       ğŸš€ SAM quick start
â”‚
â”œâ”€â”€ Comparison
â”‚   â”œâ”€â”€ SAM-VS-TERRAFORM.md      ğŸ“Š Detailed comparison
â”‚   â””â”€â”€ DEPLOYMENT-COMPARISON.md ğŸ” Quick comparison
â”‚
â”œâ”€â”€ Terraform
â”‚   â”œâ”€â”€ terraform/README.md      ğŸ“– Complete guide
â”‚   â”œâ”€â”€ terraform/MIGRATION.md   ğŸ”„ SAM migration
â”‚   â””â”€â”€ TERRAFORM-SUMMARY.md     ğŸ“ Summary
â”‚
â”œâ”€â”€ General
â”‚   â”œâ”€â”€ AWS-BACKEND-SUMMARY.md   ğŸ—ï¸ Overview
â”‚   â”œâ”€â”€ README-INDEX.md          ğŸ“‘ Documentation index
â”‚   â””â”€â”€ INFRASTRUCTURE-OVERVIEW.md ğŸ—ºï¸ This file
â”‚
â””â”€â”€ Architecture
    â””â”€â”€ docs/ARCHITECTURE.md     ğŸ¯ Detailed architecture
```

## Status

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ğŸŸ¢ PRODUCTION READY                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ… Complete Terraform infrastructure               â”‚
â”‚  âœ… Complete SAM infrastructure                     â”‚
â”‚  âœ… Comprehensive documentation (3000+ lines)       â”‚
â”‚  âœ… Automated deployment scripts                    â”‚
â”‚  âœ… Environment management                          â”‚
â”‚  âœ… Security best practices                         â”‚
â”‚  âœ… Cost-optimized                                  â”‚
â”‚  âœ… Well-tested                                     â”‚
â”‚  âœ… Ready to deploy                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Next Steps

```
1. Choose Deployment Method
   â””â”€â†’ Read: SAM-VS-TERRAFORM.md

2. Deploy Infrastructure
   â”œâ”€â†’ SAM: GETTING-STARTED.md
   â””â”€â†’ Terraform: terraform/README.md

3. Test Deployment
   â””â”€â†’ Follow: QUICK-DEPLOY.md

4. Update Frontend
   â””â”€â†’ Get API endpoint
   â””â”€â†’ Update frontend/.env

5. Monitor
   â””â”€â†’ CloudWatch Logs
   â””â”€â†’ X-Ray Tracing
```

## Support

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Getting Help                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. Check documentation              â”‚
â”‚    â””â”€â†’ README-INDEX.md              â”‚
â”‚                                     â”‚
â”‚ 2. Review troubleshooting           â”‚
â”‚    â””â”€â†’ QUICK-DEPLOY.md              â”‚
â”‚                                     â”‚
â”‚ 3. Check CloudWatch logs            â”‚
â”‚    â””â”€â†’ AWS Console                  â”‚
â”‚                                     â”‚
â”‚ 4. Verify AWS credentials           â”‚
â”‚    â””â”€â†’ aws configure                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Ready to deploy!** ğŸš€

Choose your method and follow the quick start guide:
- **SAM**: `backend-aws/GETTING-STARTED.md`
- **Terraform**: `backend-aws/terraform/README.md`
